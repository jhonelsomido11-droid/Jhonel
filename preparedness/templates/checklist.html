{% extends 'base.html' %}
{% block content %}

<div class="container my-5">
    <h2 class="text-center mb-4">Earthquake Preparedness Checklist</h2>

    <div class="progress mb-4">
        <div id="progressBar" class="progress-bar bg-danger" style="width:0%"></div>
    </div>

    <div class="checklist-box">
        <h5>Emergency Kit</h5>
        <label><input type="checkbox" class="chk"> Drinking water</label>
        <label><input type="checkbox" class="chk"> Canned food</label>
        <label><input type="checkbox" class="chk"> Flashlight & batteries</label>

        <h5 class="mt-3">Family Plan</h5>
        <label><input type="checkbox" class="chk"> Emergency contacts list</label>
        <label><input type="checkbox" class="chk"> Meeting place identified</label>

        <h5 class="mt-3">Home Safety</h5>
        <label><input type="checkbox" class="chk"> Furniture secured</label>
        <label><input type="checkbox" class="chk"> Fire extinguisher ready</label>
    </div>
</div>

<script>
const checks = document.querySelectorAll('.chk');

function updateProgress() {
    let checked = 0;
    checks.forEach(c => {
        if (c.checked) checked++;
        localStorage.setItem(c.parentElement.innerText, c.checked);
    });
    let percent = (checked / checks.length) * 100;
    document.getElementById('progressBar').style.width = percent + '%';
}

checks.forEach(c => {
    c.checked = localStorage.getItem(c.parentElement.innerText) === 'true';
    c.addEventListener('change', updateProgress);
});

updateProgress();
</script>

{% endblock %}
