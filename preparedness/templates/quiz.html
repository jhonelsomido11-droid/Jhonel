{% extends 'base.html' %}
{% block content %}

<style>
.quiz-box {
    background: white;
    padding: 40px;
    border-radius: 20px;
    width: 100%;
    max-width: 450px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
}
</style>

<div class="container my-5 d-flex justify-content-center">
    <div class="quiz-box text-center">

        <h4 id="question"></h4>
        <div id="answers" class="mt-3"></div>

        <button class="btn btn-danger mt-4" onclick="nextQuestion()">Next</button>

        <p class="mt-3 text-muted">
            Question <span id="current">1</span> of 10
        </p>

        <h4 id="result" class="mt-3"></h4>
    </div>
</div>

<script>
const quiz = [
 {q:"What should you do during an earthquake?",a:["Drop, Cover, Hold","Run outside"],c:0},
 {q:"Safest place indoors?",a:["Under a table","Near windows"],c:0},
 {q:"Emergency kit must include?",a:["Water & food","Toys"],c:0},
 {q:"Use elevators during earthquake?",a:["No","Yes"],c:0},
 {q:"Official PH earthquake info?",a:["PHIVOLCS","Social media"],c:0},
 {q:"Supplies should last how long?",a:["3 days","1 hour"],c:0},
 {q:"After earthquake, what first?",a:["Check injuries","Panic"],c:0},
 {q:"Furniture should be?",a:["Secured","Ignored"],c:0},
 {q:"Families should prepare?",a:["Emergency plan","Nothing"],c:0},
 {q:"Preparedness saves?",a:["Lives","Time only"],c:0},
];

let index=0, score=0;

function loadQuestion(){
 document.getElementById("question").innerText=quiz[index].q;
 document.getElementById("answers").innerHTML="";
 document.getElementById("current").innerText=index+1;

 quiz[index].a.forEach((ans,i)=>{
  document.getElementById("answers").innerHTML+=
   `<button class="btn btn-outline-danger d-block w-100 my-2"
    onclick="checkAnswer(${i})">${ans}</button>`;
 });
}

function checkAnswer(i){
 if(i===quiz[index].c) score++;
 nextQuestion();
}

function nextQuestion(){
 index++;
 if(index<quiz.length) loadQuestion();
 else{
  document.getElementById("question").innerText="Quiz Completed!";
  document.getElementById("answers").innerHTML="";
  document.getElementById("result").innerText=`Your Score: ${score}/${quiz.length}`;
 }
}

loadQuestion();
</script>

{% endblock %}
